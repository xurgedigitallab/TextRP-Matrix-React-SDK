{"version":3,"file":"SimpleObservable.js","names":["SimpleObservable","initialFn","_classCallCheck","_defineProperty","listeners","push","_createClass","key","value","onUpdate","fn","update","val","_iterator","_createForOfIteratorHelper","_step","s","n","done","listener","err","e","f","close","exports"],"sources":["../../src/util/SimpleObservable.ts"],"sourcesContent":["/*\n * Copyright 2020 The Matrix.org Foundation C.I.C.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport type ObservableFunction<T> = (val: T) => void;\n\nexport class SimpleObservable<T> {\n    private listeners: ObservableFunction<T>[] = [];\n\n    public constructor(initialFn?: ObservableFunction<T>) {\n        if (initialFn) this.listeners.push(initialFn);\n    }\n\n    public onUpdate(fn: ObservableFunction<T>) {\n        this.listeners.push(fn);\n    }\n\n    public update(val: T) {\n        for (const listener of this.listeners) {\n            listener(val);\n        }\n    }\n\n    public close() {\n        this.listeners = []; // reset\n    }\n}\n"],"mappings":";;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA,IAkBaA,gBAAgB;EAGzB,SAAAA,iBAAmBC,SAAiC,EAAE;IAAAC,eAAA,OAAAF,gBAAA;IAAAG,eAAA,oBAFT,EAAE;IAG3C,IAAIF,SAAS,EAAE,IAAI,CAACG,SAAS,CAACC,IAAI,CAACJ,SAAS,CAAC;EACjD;EAACK,YAAA,CAAAN,gBAAA;IAAAO,GAAA;IAAAC,KAAA,EAED,SAAAC,SAAgBC,EAAyB,EAAE;MACvC,IAAI,CAACN,SAAS,CAACC,IAAI,CAACK,EAAE,CAAC;IAC3B;EAAC;IAAAH,GAAA;IAAAC,KAAA,EAED,SAAAG,OAAcC,GAAM,EAAE;MAAA,IAAAC,SAAA,GAAAC,0BAAA,CACK,IAAI,CAACV,SAAS;QAAAW,KAAA;MAAA;QAArC,KAAAF,SAAA,CAAAG,CAAA,MAAAD,KAAA,GAAAF,SAAA,CAAAI,CAAA,IAAAC,IAAA,GAAuC;UAAA,IAA5BC,QAAQ,GAAAJ,KAAA,CAAAP,KAAA;UACfW,QAAQ,CAACP,GAAG,CAAC;QACjB;MAAC,SAAAQ,GAAA;QAAAP,SAAA,CAAAQ,CAAA,CAAAD,GAAA;MAAA;QAAAP,SAAA,CAAAS,CAAA;MAAA;IACL;EAAC;IAAAf,GAAA;IAAAC,KAAA,EAED,SAAAe,MAAA,EAAe;MACX,IAAI,CAACnB,SAAS,GAAG,EAAE,CAAC,CAAC;IACzB;EAAC;EAAA,OAAAJ,gBAAA;AAAA;AAAAwB,OAAA,CAAAxB,gBAAA,GAAAA,gBAAA"}