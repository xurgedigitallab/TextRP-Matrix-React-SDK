{"version":3,"file":"sizer.js","names":["Sizer","constructor","container","vertical","reverse","getItemOffset","item","offset","offsetTop","offsetLeft","getOffset","getTotalSize","getItemSize","offsetHeight","offsetWidth","getPageOffset","element","pos","offsetParent","getDesiredItemSize","style","height","width","setItemSize","size","clearItemSize","removeProperty","start","finish","offsetFromEvent","event","pageY","pageX","exports","default"],"sources":["../../src/resizer/sizer.ts"],"sourcesContent":["/*\r\nCopyright 2018 - 2020 The Matrix.org Foundation C.I.C.\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n*/\r\n\r\n/**\r\nimplements DOM/CSS operations for resizing.\r\nThe sizer determines what CSS mechanism is used for sizing items, like flexbox, ...\r\n*/\r\nexport default class Sizer {\r\n    public constructor(\r\n        protected readonly container: HTMLElement,\r\n        protected readonly vertical: boolean,\r\n        protected readonly reverse: boolean,\r\n    ) {}\r\n\r\n    /**\r\n        @param {Element} item the dom element being resized\r\n        @return {number} how far the edge of the item is from the edge of the container\r\n    */\r\n    public getItemOffset(item: HTMLElement): number {\r\n        const offset = (this.vertical ? item.offsetTop : item.offsetLeft) - this.getOffset();\r\n        if (this.reverse) {\r\n            return this.getTotalSize() - (offset + this.getItemSize(item));\r\n        } else {\r\n            return offset;\r\n        }\r\n    }\r\n\r\n    /**\r\n        @param {Element} item the dom element being resized\r\n        @return {number} the width/height of an item in the container\r\n    */\r\n    public getItemSize(item: HTMLElement): number {\r\n        return this.vertical ? item.offsetHeight : item.offsetWidth;\r\n    }\r\n\r\n    /** @return {number} the width/height of the container */\r\n    public getTotalSize(): number {\r\n        return this.vertical ? this.container.offsetHeight : this.container.offsetWidth;\r\n    }\r\n\r\n    /** @return {number} container offset to offsetParent */\r\n    private getOffset(): number {\r\n        return this.vertical ? this.container.offsetTop : this.container.offsetLeft;\r\n    }\r\n\r\n    /** @return {number} container offset to document */\r\n    private getPageOffset(): number {\r\n        let element = this.container;\r\n        let offset = 0;\r\n        while (element) {\r\n            const pos = this.vertical ? element.offsetTop : element.offsetLeft;\r\n            offset = offset + pos;\r\n            element = <HTMLElement>element.offsetParent;\r\n        }\r\n        return offset;\r\n    }\r\n\r\n    public getDesiredItemSize(item: HTMLElement): string {\r\n        if (this.vertical) {\r\n            return item.style.height;\r\n        } else {\r\n            return item.style.width;\r\n        }\r\n    }\r\n\r\n    public setItemSize(item: HTMLElement, size: string): void {\r\n        if (this.vertical) {\r\n            item.style.height = size;\r\n        } else {\r\n            item.style.width = size;\r\n        }\r\n    }\r\n\r\n    public clearItemSize(item: HTMLElement): void {\r\n        if (this.vertical) {\r\n            item.style.removeProperty(\"height\");\r\n        } else {\r\n            item.style.removeProperty(\"width\");\r\n        }\r\n    }\r\n\r\n    public start(item: HTMLElement): void {}\r\n\r\n    public finish(item: HTMLElement): void {}\r\n\r\n    /**\r\n        @param {MouseEvent} event the mouse event\r\n        @return {number} the distance between the cursor and the edge of the container,\r\n            along the applicable axis (vertical or horizontal)\r\n    */\r\n    public offsetFromEvent(event: MouseEvent): number {\r\n        const pos = this.vertical ? event.pageY : event.pageX;\r\n        if (this.reverse) {\r\n            return this.getPageOffset() + this.getTotalSize() - pos;\r\n        } else {\r\n            return pos - this.getPageOffset();\r\n        }\r\n    }\r\n}\r\n"],"mappings":"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"}