{"version":3,"file":"SettingController.js","names":["SettingController","getValueOverride","level","roomId","calculatedValue","calculatedAtLevel","beforeChange","newValue","onChange","settingDisabled","exports","default"],"sources":["../../../src/settings/controllers/SettingController.ts"],"sourcesContent":["/*\r\nCopyright 2017 Travis Ralston\r\nCopyright 2020 The Matrix.org Foundation C.I.C.\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n*/\r\n\r\nimport { SettingLevel } from \"../SettingLevel\";\r\n\r\n/**\r\n * Represents a controller for individual settings to alter the reading behaviour\r\n * based upon environmental conditions, or to react to changes and therefore update\r\n * the working environment.\r\n *\r\n * This is not intended to replace the functionality of a SettingsHandler, it is only\r\n * intended to handle environmental factors for specific settings.\r\n */\r\nexport default abstract class SettingController {\r\n    /**\r\n     * Gets the overridden value for the setting, if any. This must return null if the\r\n     * value is not to be overridden, otherwise it must return the new value.\r\n     * @param {string} level The level at which the value was requested at.\r\n     * @param {String} roomId The room ID, may be null.\r\n     * @param {*} calculatedValue The value that the handlers think the setting should be,\r\n     * may be null.\r\n     * @param {SettingLevel} calculatedAtLevel The level for which the calculated value was\r\n     * calculated at. May be null.\r\n     * @return {*} The value that should be used, or null if no override is applicable.\r\n     */\r\n    public getValueOverride(\r\n        level: SettingLevel,\r\n        roomId: string | null,\r\n        calculatedValue: any,\r\n        calculatedAtLevel: SettingLevel | null,\r\n    ): any {\r\n        return null; // no override\r\n    }\r\n\r\n    /**\r\n     * Called before the setting value has been changed, can abort the change.\r\n     * @param {string} level The level at which the setting has been modified.\r\n     * @param {String} roomId The room ID, may be null.\r\n     * @param {*} newValue The new value for the setting, may be null.\r\n     * @return {boolean} Whether the settings change should be accepted.\r\n     */\r\n    public async beforeChange(level: SettingLevel, roomId: string | null, newValue: any): Promise<boolean> {\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Called when the setting value has been changed.\r\n     * @param {string} level The level at which the setting has been modified.\r\n     * @param {String} roomId The room ID, may be null.\r\n     * @param {*} newValue The new value for the setting, may be null.\r\n     */\r\n    public onChange(level: SettingLevel, roomId: string | null, newValue: any): void {\r\n        // do nothing by default\r\n    }\r\n\r\n    /**\r\n     * Gets whether the setting has been disabled due to this controller.\r\n     * Can also return a string with the reason the setting is disabled.\r\n     */\r\n    public get settingDisabled(): boolean | string {\r\n        return false;\r\n    }\r\n}\r\n"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAeA,iBAAiB,CAAC;EAC5C;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACWC,gBAAgBA,CACnBC,KAAmB,EACnBC,MAAqB,EACrBC,eAAoB,EACpBC,iBAAsC,EACnC;IACH,OAAO,IAAI,CAAC,CAAC;EACjB;;EAEA;AACJ;AACA;AACA;AACA;AACA;AACA;EACI,MAAaC,YAAYA,CAACJ,KAAmB,EAAEC,MAAqB,EAAEI,QAAa,EAAoB;IACnG,OAAO,IAAI;EACf;;EAEA;AACJ;AACA;AACA;AACA;AACA;EACWC,QAAQA,CAACN,KAAmB,EAAEC,MAAqB,EAAEI,QAAa,EAAQ;IAC7E;EAAA;;EAGJ;AACJ;AACA;AACA;EACI,IAAWE,eAAeA,CAAA,EAAqB;IAC3C,OAAO,KAAK;EAChB;AACJ;AAACC,OAAA,CAAAC,OAAA,GAAAX,iBAAA"}